From 53d6a664a3488edcb15ccf19a5ba1b35ed52d473 Mon Sep 17 00:00:00 2001
From: uti <uti.edun@chainguard.dev>
Date: Tue, 27 May 2025 08:06:28 +0000
Subject: [PATCH] build: update Protobuf dependency references to use the
 correct casing

---
 src/v/datalake/CMakeLists.txt                   | 2 +-
 src/v/datalake/tests/CMakeLists.txt             | 6 ++++--
 src/v/pandaproxy/schema_registry/CMakeLists.txt | 4 ++--
 src/v/schema/protobuf/CMakeLists.txt            | 2 +-
 src/v/serde/protobuf/CMakeLists.txt             | 2 +-
 src/v/serde/protobuf/tests/CMakeLists.txt       | 2 +-
 6 files changed, 10 insertions(+), 8 deletions(-)

diff --git a/src/v/datalake/CMakeLists.txt b/src/v/datalake/CMakeLists.txt
index ffee09f15d..fbc39c8cff 100644
--- a/src/v/datalake/CMakeLists.txt
+++ b/src/v/datalake/CMakeLists.txt
@@ -69,7 +69,7 @@ v_cc_library(
     v::storage
     v::schema
     Seastar::seastar
-    protobuf::libprotobuf
+    Protobuf::protobuf
     v::iceberg
     v::serde_protobuf
     v::serde_avro
diff --git a/src/v/datalake/tests/CMakeLists.txt b/src/v/datalake/tests/CMakeLists.txt
index ff8906e915..65a1e7c245 100644
--- a/src/v/datalake/tests/CMakeLists.txt
+++ b/src/v/datalake/tests/CMakeLists.txt
@@ -1,4 +1,6 @@
 find_package(Avro REQUIRED)
+find_package(Protobuf REQUIRED)
+
 set(testdata_dir "${CMAKE_CURRENT_SOURCE_DIR}/testdata")
 
 v_cc_library(
@@ -12,7 +14,7 @@ v_cc_library(
   DEPS
     Avro::avro
     Seastar::seastar
-    protobuf::libprotobuf
+    Protobuf::protobuf
     v::avro_test_utils
     v::protobuf_test_utils
     v::schema
@@ -129,7 +131,7 @@ protobuf_generate_cpp(PROTO_SRCS PROTO_HDRS ${PROTO_FILES})
 v_cc_library(
   NAME datalake_test_proto_cc_files
   SRCS ${PROTO_SRCS}
-  DEPS protobuf::libprotobuf
+  DEPS Protobuf::protobuf
 )
 
 rp_test(
diff --git a/src/v/pandaproxy/schema_registry/CMakeLists.txt b/src/v/pandaproxy/schema_registry/CMakeLists.txt
index bcf83cd966..ce12218eb9 100644
--- a/src/v/pandaproxy/schema_registry/CMakeLists.txt
+++ b/src/v/pandaproxy/schema_registry/CMakeLists.txt
@@ -7,6 +7,7 @@ seastar_generate_swagger(
 
 find_package(Avro)
 find_package(jsoncons REQUIRED)
+find_package(Protobuf REQUIRED)
 
 v_cc_library(
   NAME pandaproxy_schema_registry
@@ -38,8 +39,7 @@ v_cc_library(
     v::container
     Avro::avro
     Boost::iostreams
-    protobuf::libprotobuf
-    protobuf::libprotoc
+    Protobuf::protobuf
     jsoncons
   )
 
diff --git a/src/v/schema/protobuf/CMakeLists.txt b/src/v/schema/protobuf/CMakeLists.txt
index e29c302f6a..63befc1546 100644
--- a/src/v/schema/protobuf/CMakeLists.txt
+++ b/src/v/schema/protobuf/CMakeLists.txt
@@ -28,7 +28,7 @@ protobuf_generate_cpp(PROTO_SRCS PROTO_HDRS ${PROTO_FILES})
 v_cc_library(
   NAME pandaproxy_schema_registry_protobuf
   SRCS ${PROTO_SRCS}
-  DEPS protobuf::libprotobuf
+  DEPS Protobuf::protobuf
 )
 
 # Disable clang tidy
diff --git a/src/v/serde/protobuf/CMakeLists.txt b/src/v/serde/protobuf/CMakeLists.txt
index 60b29749ca..11ee1fe944 100644
--- a/src/v/serde/protobuf/CMakeLists.txt
+++ b/src/v/serde/protobuf/CMakeLists.txt
@@ -9,7 +9,7 @@ v_cc_library(
     v::bytes
     v::container
     v::utils
-    protobuf::libprotobuf
+    Protobuf::protobuf
   )
 
 add_subdirectory(tests)
diff --git a/src/v/serde/protobuf/tests/CMakeLists.txt b/src/v/serde/protobuf/tests/CMakeLists.txt
index e63431b82f..d69efc7d59 100644
--- a/src/v/serde/protobuf/tests/CMakeLists.txt
+++ b/src/v/serde/protobuf/tests/CMakeLists.txt
@@ -7,6 +7,6 @@ v_cc_library(
   SRCS
     data_generator.cc
   DEPS
-    protobuf::libprotobuf
+    Protobuf::protobuf
     v::random
 )
-- 
2.49.0

